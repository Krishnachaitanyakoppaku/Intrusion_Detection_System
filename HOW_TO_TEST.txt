================================================================================
HOW TO TEST THE IDS COMPONENTS
================================================================================

I've created a complete testing setup for your IDS components. Here's how to test them:

================================================================================
QUICK START (3 Simple Steps)
================================================================================

STEP 1: Run Component Tests
----------------------------
On Windows:
  test_components.bat

On Linux/WSL:
  ./test_components.sh

This will check:
  ✓ All required files exist
  ✓ Python dependencies (Scapy)
  ✓ Script syntax validity
  ✓ Log files setup

STEP 2: Test Packet Capture
----------------------------
Open a terminal and run:
  python scapy_capture.py

In another terminal or browser:
  - Browse websites
  - Ping servers
  - Generate any network traffic

Check the results:
  type logs\all_packets.log    (Windows)
  cat logs/all_packets.log     (Linux)

You should see entries like:
  2025-11-03 10:00:00 | 192.168.1.100:80 -> 192.168.1.200:443 | TCP | Size: 150B

STEP 3: Test Complete Workflow
------------------------------
A. Build the packet analyzer:
   make packet_analyzer
   (Note: Requires bison/flex - install if needed)

B. Run the analyzer:
   .\bin\packet_analyzer          (Windows)
   ./bin/packet_analyzer            (Linux)

   Or with custom paths:
   .\bin\packet_analyzer logs\all_packets.log rules\local.rules

C. Check the results:
   type logs\alerts.log            (Windows)
   cat logs/alerts.log             (Linux)

   You should see alerts like:
   [2025-11-03 10:00:00] ALERT: Incoming HTTP Traffic | ... | Priority: 5

================================================================================
DETAILED TESTING WORKFLOW
================================================================================

1. TEST SCAPY CAPTURE
   ------------------
   Command: python scapy_capture.py [interface]
   
   What it does:
   - Captures network packets using Scapy
   - Logs them to logs/all_packets.log
   - Format: timestamp | src_ip:port -> dst_ip:port | protocol | size
   
   Test it:
   - Run the script
   - Generate network traffic (web browsing, ping, etc.)
   - Stop with Ctrl+C
   - Check logs/all_packets.log

2. TEST PACKET PARSER (Compiler Design)
   ------------------------------------
   Components:
   - src/packet_lexer.l  (Lexer - tokenizes log entries)
   - src/packet_parser.y (Parser - grammar rules)
   - src/packet_parser_helper.c (Helper functions)
   
   How it works:
   - Uses Lex/Yacc compiler design techniques
   - Parses each line from all_packets.log
   - Extracts: timestamp, IPs, ports, protocol, size
   
   Test it:
   - Built into packet_analyzer
   - Will parse automatically when analyzer runs

3. TEST RULE MATCHER
   -----------------
   Component: src/rule_matcher.c
   
   What it does:
   - Compares parsed packets against IDS rules
   - Checks protocol, IP addresses, ports
   - Matches content patterns
   - Writes alerts when rules match
   
   Test it:
   - Run packet_analyzer
   - It will match packets against rules/local.rules
   - Check logs/alerts.log for generated alerts

4. TEST COMPLETE SYSTEM
   --------------------
   Full workflow:
   
   Terminal 1:
     python scapy_capture.py
     (Wait 30 seconds, then Ctrl+C)
   
   Terminal 2:
     make packet_analyzer
     ./bin/packet_analyzer
   
   Terminal 3:
     cat logs/all_packets.log    # See captured packets
     cat logs/alerts.log         # See generated alerts

================================================================================
EXPECTED RESULTS
================================================================================

After successful testing, you should have:

✓ logs/all_packets.log
  - Contains captured network packets
  - Format: timestamp | src -> dst | protocol | size
  
✓ logs/alerts.log
  - Contains security alerts
  - Generated when packets match IDS rules
  - Format: [timestamp] ALERT: message | src -> dst | protocol | priority

✓ bin/packet_analyzer (executable)
  - Processes packet logs
  - Matches against rules
  - Generates alerts

================================================================================
TROUBLESHOOTING
================================================================================

Issue: "Scapy not found"
Solution: pip install scapy

Issue: "bison/flex not found" (for building)
Solution: 
  Windows/WSL: sudo apt-get install bison flex
  (Note: You can still test Scapy capture without building C components)

Issue: "No packets captured"
Solution:
  - Check network interface name
  - Generate actual network traffic
  - Try different interface: python scapy_capture.py wlan0

Issue: "No alerts generated"
Solution:
  - Verify packets exist in all_packets.log
  - Check that rules match your traffic patterns
  - Review rules/local.rules syntax

Issue: "Permission denied" (packet capture)
Solution:
  - Linux: Run with sudo
  - Windows: Run as Administrator
  - Or use WSL

================================================================================
FILES CREATED FOR TESTING
================================================================================

1. test_components.sh / test_components.bat
   - Automated component tests
   - Checks dependencies and file existence

2. test_workflow.md
   - Detailed testing documentation
   - Step-by-step instructions

3. QUICK_TEST.md
   - Quick reference guide
   - Minimal steps to verify functionality

4. Updated Makefile
   - Added packet_analyzer target
   - Build command: make packet_analyzer

================================================================================
NEXT STEPS AFTER TESTING
================================================================================

Once everything works:

1. Integrate with existing workflow
   - The components are standalone and won't disturb existing code
   - You can integrate them when ready

2. Customize rules
   - Edit rules/local.rules
   - Add your own detection rules

3. Extend functionality
   - Add more packet fields to parser
   - Enhance rule matching logic
   - Add new detection capabilities

================================================================================
SUMMARY
================================================================================

You now have:
  ✓ Scapy packet capture → logs/all_packets.log
  ✓ Compiler design parser (Lex/Yacc) → parses packet logs
  ✓ Rule matcher → checks packets against rules
  ✓ Alert generator → writes to logs/alerts.log
  ✓ Testing scripts and documentation

All components are ready to test and integrate!

